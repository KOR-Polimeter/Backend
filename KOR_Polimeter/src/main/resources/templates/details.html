<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Digital Services Ranking</title>
<link rel="stylesheet" href="/css/details_style.css">
<link rel="stylesheet" href="/css/default_style.css">
</head>
<body>
	<header>
		<h1>
			<a th:href="@{/}">KOR_Polimeter</a>
		</h1>
		<nav>
			<ul>
				<li><a th:href="@{/html/toppol.html}">TOP10 실시간</a></li>
				<li><a th:href="@{/searching}">인물검색</a></li>
				<li><a th:href="@{/vote}">투표하기</a></li>
				<div class="vertical-line"></div>
				<li><a th:href="@{/login}">로그인</a></li>
				<li><a th:href="@{/logout}">로그아웃</a></li>

			</ul>
		</nav>
	</header>
	<div class="TNB">
		<hr>
		<h2>상세정보</h2>
		<hr>
	</div>
	<div class="contents-container">
		<div class="profile-container">
			<div class="img-details-description-container">
				<div class="img-details-container">
					<!-- 프로필 이미지 -->
					<div class="profile-image-container">
						<img th:src="@{images/politicians/{party}/{name}.jpg(name=${name}, party=${party})}"
							 alt="Profile Picture"
							 class="profile-image">
					</div>
					<!-- 프로필 상세 정보 -->
					<div class="profile-details">
						<p><span class="label">이름</span><span class="value" th:text="${name}">홍길동</span></p>
						<p><span class="label">소속정당</span><span class="value" th:text="${party}">포도당</span></p>
						<p><span class="label">지역선거구</span><span class="value" th:text="${region}">서울특별시</span></p>
						<p><span class="label">출생날짜</span><span class="value" th:text="${bday}">1980-01-01</span></p>
						<p><span class="label">연령</span><span class="value" th:text="${age} + '세'">43세</span></p>
						<p><span class="label">성별</span><span class="value" th:text="${gender == 0 ? '남' : '여'}">남성</span></p>
					</div>
				</div>
				<!-- 프로필 설명 -->
				<div class="profile-description-container" th:data-description="${description}">
					<h3 id="profile-description">대표발의 의안</h3>
					<ul id="description-list"></ul>
				</div>
			</div>
			<div class="cloud-and-back-container">
				<div class="cloud-container">
					<h3 class="img-title">워드 클라우드</h3>
					<img src="/images/예제_cloud.png" alt="Word Cloud">
				</div>
				<div class="back-container">
					<a href="#" class="back-link" id="back-link">인물 목록으로 돌아가기</a>
				</div>
			</div>
		</div>
	</div>
	<footer>
		<p>Contact us at: sdg0896@gmail.com</p>
		<p>Github: https://github.com/KOR-Polimeter</p>
		<p>Website created in 2024.</p>
	</footer>

	<script>
	  document.addEventListener('DOMContentLoaded', () => {
		  const dataContainer = document.querySelector(".profile-description-container");
		  const description = dataContainer.dataset.description; // description 값 읽기
		  if (!description) {
			  console.error("description 값이 비어 있습니다.");
			  return;
		  }
		  //console.log(description)

		// description을 콤마로 나누어 배열로 변환
		const descriptionList = description.split(",");

		// 리스트를 HTML로 렌더링
		const descriptionUl = document.getElementById("description-list");
		descriptionList.forEach(item => {
			const li = document.createElement("li");
			li.textContent = item.trim(); // 앞뒤 공백 제거
			descriptionUl.appendChild(li);
		});

	    // 이 부분에서 id를 기반으로 상세 정보를 로딩하거나 표시
	    console.log(id); // 예시로 id를 콘솔에 출력
	  });

	  document.addEventListener('DOMContentLoaded', () => {
		  const backLink = document.getElementById('back-link');
		  backLink.addEventListener('click', (event) => {
			  event.preventDefault(); // 기본 동작(페이지 이동) 막기
			  history.back(); // 이전 페이지로 이동
		  });
	  });
	</script>

</body>
</html>
