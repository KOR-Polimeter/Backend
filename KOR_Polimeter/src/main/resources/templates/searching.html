<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Digital Services Ranking</title>
	<link th:href="@{/css/searching_style.css}" rel="stylesheet">
	<link th:href="@{/css/default_style.css}" rel="stylesheet">
</head>
<body>
<header>
	<h1>
		<a th:href="@{/}">KOR_Polimeter</a>
	</h1>
	<nav>
		<ul>
			<li><a th:href="@{/login}">로그인</a></li>
			<li><a th:href="@{/logout}">로그아웃</a></li>
			<li><a th:href="@{/searching}">인물검색</a></li>
			<li><a th:href="@{/vote}">투표하기</a></li>
		</ul>
	</nav>
</header>

<!-- 검색 페이지 상단 배너 -->
<div class="TNB">
	<hr>
	<h2>인물 검색</h2>
	<hr>
</div>
<div class="container">
	<div class="filters">
		<!-- 필터 영역 -->
		<hr>
		<h3>필터</h3>
		<hr>
		<label><input type="radio" name="filter" value="all" checked>전체</label>
		<hr>
		<label><input type="radio" name="filter" value="2030"> 20대 ~ 30대</label>
		<label><input type="radio" name="filter" value="4050"> 40대 ~ 50대</label>
		<label><input type="radio" name="filter" value="60"> 60대~</label>
		<hr>
		<label><input type="radio" name="filter" value="men"> 남</label>
		<label><input type="radio" name="filter" value="women"> 여</label>
	</div>
	<div class="content">
		<hr>
		<!-- 검색 바 영역 -->
		<div class="search-bar">
			<!-- 검색 조건 선택 박스 -->
			<select id="search-type" th:name="searchType">
				<option value="name" th:selected="${searchType == 'name'}">이름</option>
				<option value="keyword" th:selected="${searchType == 'keyword'}">키워드</option>
			</select>

			<!-- 검색 입력 -->
			<input type="text" placeholder="검색하기" id="search" th:name="query" th:value="${query}">

			<!-- 검색 버튼 -->
			<button id="search-btn" th:onclick="'searchSubmit()'">검색</button>

			<!-- Popularity 텍스트 -->
			<span id="popularity-label">인기도</span>
		</div>
		<hr>
		<!-- 인물 리스트 영역 -->
		<ul class="ranking-list" id="ranking-list">
			<!-- Thymeleaf를 사용하여 서버에서 전달된 데이터를 렌더링 -->
			<li class="ranking-item" th:each="item : ${rankings}" th:data-id="${item.id}">
				<span class="ranking-number" th:text="${item.id}"></span>
				<img th:src="${item.image}" th:alt="${item.name}">
				<div class="ranking-details">
					<span class="name" th:text="${item.name}"></span>
					<span class="popularity" th:text="${item.popularity}"></span>
				</div>
			</li>
		</ul>
	</div>
</div>
<footer>
	<p>Contact us at: sdg0896@gmail.com</p>
	<p>Github: https://github.com/KOR-Polimeter</p>
	<p>Website created in 2024.</p>
</footer>

<!-- JavaScript for dynamic content -->
<script th:inline="javascript">
	function searchSubmit() {
		const searchType = document.getElementById('search-type').value;
		const query = document.getElementById('search').value;
		if (query.trim() === '') {
			alert('검색어를 입력해주세요.');
			return;
		}
		// 서버로 검색 요청을 보냄
		const url = /*[[@{/searching}]]*/ 'searching';
		window.location.href = `${url}?searchType=${searchType}&query=${query}`;
	}
</script>
</body>
</html>